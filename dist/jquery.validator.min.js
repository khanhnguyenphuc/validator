!function(t,s){"use strict";var e="pkvalidator",i=e,r={inputs:"input, textarea, select",excluded:"input[type=hidden], input[type=file], :disabled",trigger:!1,animate:!0,animateDuration:300,focus:"first",validationMinlength:3,successClass:"pkvalidate-success",errorClass:"pkvalidate-error",errorMessage:!1,validators:{},showErrors:!0,messages:{},errors:{classHandler:function(s){return t(s).closest(".form-group")},container:function(){},errorsWrapper:'<div class="form-group has-error"></div>',errorElem:'<p class="help-block has-error"></p>'}},a=function(s){this.messages={defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",dateIso:"This value should be a valid date (YYYY-MM-DD).",phone:"This value should be a valid phone number."},notnull:"This value should not be null.",required:"This value is require.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",regexp:"This value seems to be invalid.",match:"This value should be the same %s."},this.validators={match:function(s,e){return!s||s===t(e).val()},minlength:function(t,s){return t.length>=s},maxlength:function(t,s){return t.length<=s},notnull:function(t){return t.length>0},notblank:function(t){return"string"==typeof t&&""!==t.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(t){if("object"==typeof t){for(var s in t)if(this.required(t[s]))return!0;return!1}return"boolean"==typeof t?t:this.notnull(t)&&this.notblank(t)},type:function(t,s){var e;switch(s){case"email":e=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))){2,6}$/i;break;case"url":t=new RegExp("(https?|s?ftp|git)","i").test(t)?t:"http://"+t;case"dateIso":e=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;case"phone":e=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;break;default:return!1}return""!==t?e.test(t):!1},regexp:function(t,s,e){return new RegExp(s,e.options.regexpFlag||"").test(t)}},this.init(s)};t.extend(a.prototype,{constructor:a,init:function(t){var s,e=t.validators,i=t.messages;for(s in e)this.addValidator(s,e[s]);for(s in i)this.addMessage(s,i[s])},formatMesssage:function(t,s){if("object"==typeof s){for(var e in s)t=this.Validator.formatMesssage(t,s[e]);return t}return"string"==typeof t?t.replace(new RegExp("%s","i"),s):""},addValidator:function(t,s){this.validators[t]=s},addMessage:function(t,s,e){if("undefined"!=typeof e&&!0===e)return void(this.messages.type[t]=s);if("type"!==t);else for(var i in s)this.messages.type[i]=s[i]}});var o=function(s,e,i){return this.$element=t(s),this.Validator=new a(e),"PkvalidatorMultiField"===i?this:(this._options=e,this._type="PkvalidatorField",this.lstError=[],this.hasError=!1,this.addConstraints(),void this.init(e))};t.extend(o.prototype,{constructor:o,init:function(){var s="input."+this._type+" change."+this._type+" focusout."+this._type;this.$element.on(s,t.proxy(this.validate,this))},validate:function(){var s=this.$element.val(),e=this.$element.data();if(!this.$element.data("required")&&!this.Validator.validators.required(s))return this._options.errors.classHandler(this.$element).removeClass("hasError"),this.removeMessageError(this.$element),!1;this.removeMessageError(this.$element),this._options.errors.classHandler(this.$element).removeClass("hasError"),this.hasError=!1,(this.$element.is('[type="radio"]')||this.$element.is('[type="checkbox"]'))&&(this.$element=t('input[name="'+this.$element.attr("name")+'"]'),s=!1,e=this.$element.first().data(),this.$element.each(function(){t(this).prop("checked")&&(s=!0)}));for(var i in e)if(this.Validator.validators.hasOwnProperty(i)&&!this.Validator.validators[i](s,e[i])){this._options.errors.classHandler(this.$element).addClass("hasError"),this.hasError=!0,this.showMessageError(this.$element,i,e[i]);break}return this.hasError},addConstraints:function(){for(var t in this._options.constraints){var s=this._options.constraints[t];this.$element.data(t,s)}},manageErrors:function(){},showMessageError:function(s,e,i){var r=this._options.errors.classHandler(s),a="object"==typeof this.Validator.messages[e]?this.Validator.messages[e][i]:this.Validator.messages[e],o=r.find(t(this._options.errors.errorsWrapper)),n=t(this._options.errors.errorElem),a=this.Validator.formatMesssage(a,i,this);if(s.removeClass(this._options.successClass),s.attr("data-error-"+e)){var h=s.attr("data-error-"+e);a=this.Validator.formatMesssage(h,i,this)}n.text(a),o.length||(r.append(this._options.errors.errorsWrapper),o=t(t(this._options.errors.errorsWrapper),r)),n.addClass(this._options.errorClass),o.append(n),r.append(o)},removeMessageError:function(t){var s=this._options.errors.classHandler(t);s.removeClass("hasError"),s.find("."+this._options.errorClass+":first").parent().remove()},showSuccessField:function(t){t.removeClass(this._options.errorClass),t.addClass(this._options.successClass)},destroy:function(){this.$element.off("."+this._type).removeData(i),this.removeMessageError(this.$element)}});var n=function(s,e){this.$element=t(s),this.items={},this.Validator=new a(e),this._options=e,this.inherit(s,e),this.init(e),this._type="PkvalidatorMultiField"};t.extend(n.prototype,{init:function(s){this.group=s.group||!1,this.siblings=t(this.group?"input[type="+this.group+"]":"input[type="+this.$element.name+"]"),this.isRadio=!1,this.isCheckbox=!1,this.siblings.on("change."+this._type,t.proxy(this.validate,this))},inherit:function(t,s){var e=new o(t,s,this._type);for(var i in e)"undefined"==typeof this[i]&&(this[i]=e[i])},getVal:function(){var t=[];if(this.isRadio){var s=this.siblings.find("input:checked").val()||!1;t.push(s)}return this.isCheckbox&&this.siblings.find("input:checked").forEach(function(){t.push(this.val())}),t}});var h=function(s,e){this.$element=t(s),this.items=[],this.Validator=new a(e),this._options=e,this.init(e)};t.extend(h.prototype,{constructor:h,init:function(s){var e=this;this.$element.find(s.inputs).each(function(){e.addItem(this)}),this.$element.on("submit.PkvalidatorForm",t.proxy(this.onSubmit,this))},validate:function(){return this.items.forEach(function(t){t.validate()}),!this.hasError()},hasError:function(){for(var t in this.items)if(this.items[t].hasError)return!0;return!1},addItem:function(s){if(t(s).is(this._options.excluded))return!1;var e=t(s).pkvalidator(this._options);this.items.push(e)},onSubmit:function(t){this.validate()?console("submit success"):t.preventDefault()},showMessageError:function(s,e,i){var r=this._options.errors.classHandler(s),a="object"==typeof this.Validator.messages[e]?this.Validator.messages[e][i]:this.Validator.messages[e],o=r.find(t(this._options.errors.errorsWrapper)),n=t(this._options.errors.errorElem),a=this.Validator.formatMesssage(a,i,this);if(s.removeClass(this._options.successClass),s.attr("data-error-"+e)){var h=s.attr("data-error-"+e);a=this.Validator.formatMesssage(h,i,this)}n.text(a),o.length||(r.append(this._options.errors.errorsWrapper),o=t(t(this._options.errors.errorsWrapper),r)),n.addClass(this._options.errorClass),o.append(n),r.append(o)},removeMessageError:function(t){var s=this._options.errors.classHandler(t);s.removeClass("hasError"),s.find("."+this._options.errorClass+":first").parent().remove()},showSuccessField:function(t){t.removeClass(this._options.errorClass),t.addClass(this._options.successClass)},destroy:function(){this.$element.off("."+this._type).removeData(i),this.items.forEach(function(t){t.destroy()})}}),t.fn[e]=function(s){var e=this.data(i);if(e){if("string"==typeof s&&"function"==typeof e[s]){var a=e[s]();return"undefined"!=typeof a?a:t(self)}"undefined"!=typeof s&&e.init(s)}else s=t.extend({},r,"undefined"!=typeof s?s:{},this.data()),this.is("form")?e=new h(this,s):this.is(s.excluded)||(e=this.is("input[type=radio], input[type=checkbox]")?new n(this,s):new o(this,s)),this.data(i,e);return e},t(s).on("load",function(){t('[data-validate="pkvalidator"]').each(function(){t(this).pkvalidator()})})}(jQuery,window,document);