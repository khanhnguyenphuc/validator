!function(e,t,s,r){"use strict";var i="pkvalidator",a={inputs:"input, textarea, select",excluded:"input[type=hidden], input[type=file], :disabled",trigger:!1,animate:!0,animateDuration:300,focus:"first",validationMinlength:3,successClass:"pkvalidate-success",errorClass:"pkvalidate-error",errorMessage:!1,validators:{},showErrors:!0,messages:{},errors:{classHandler:function(t,s){return e(t).closest(".form-group")},container:function(e,t){},errorsWrapper:'<div class="form-group has-error"></div>',errorElem:'<p class="help-block has-error"></p>'}},n=function(t){this.messages={defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",urlstrict:"This value should be a valid url.",number:"This value should be a valid number.",digits:"This value should be digits.",dateIso:"This value should be a valid date (YYYY-MM-DD).",alphanum:"This value should be alphanumeric.",phone:"This value should be a valid phone number."},notnull:"This value should not be null.",notblank:"This value should not be blank.",required:"This value is required.",regexp:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or less.",rangelength:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or less.",rangecheck:"You must select between %s and %s choices.",equalto:"This value should be the same."},this.validators={notnull:function(e){return e.length>0},notblank:function(e){return"string"==typeof e&&""!==e.replace(/^\s+/g,"").replace(/\s+$/g,"")},required:function(e){if("object"==typeof e){for(var t in e)if(this.required(e[t]))return!0;return!1}return this.notnull(e)&&this.notblank(e)},type:function(e,t){var s;switch(t){case"number":s=/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/;break;case"digits":s=/^\d+$/;break;case"alphanum":s=/^\w+$/;break;case"email":s=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))){2,6}$/i;break;case"url":e=new RegExp("(https?|s?ftp|git)","i").test(e)?e:"http://"+e;case"urlstrict":s=/^(https?|s?ftp|git):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i;break;case"dateIso":s=/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/;break;case"phone":s=/^((\+\d{1,3}(-| )?\(?\d\)?(-| )?\d{1,5})|(\(?\d{2,6}\)?))(-| )?(\d{3,4})(-| )?(\d{4})(( x| ext)\d{1,5}){0,1}$/;break;default:return!1}return""!==e?s.test(e):!1},regexp:function(e,t,s){return new RegExp(t,s.options.regexpFlag||"").test(e)},minlength:function(e,t){return e.length>=t},maxlength:function(e,t){return e.length<=t},rangelength:function(e,t){return this.minlength(e,t[0])&&this.maxlength(e,t[1])},min:function(e,t){return Number(e)>=t},max:function(e,t){return Number(e)<=t},range:function(e,t){return e>=t[0]&&e<=t[1]},equalto:function(t,s,r){return r.options.validateIfUnchanged=!0,t===e(s).val()},remote:function(t,s,r){var i=null,a={},n={};a[r.$element.attr("name")]=t,"undefined"!=typeof r.options.remoteDatatype&&(n={dataType:r.options.remoteDatatype});var o=function(t,s){"undefined"!=typeof s&&"undefined"!=typeof r.Validator.messages.remote&&s!==r.Validator.messages.remote&&e(r.ulError+" .remote").remove(),r.updtConstraint({name:"remote",valid:t},s),r.manageValidationResult()},u=function(t){if("object"==typeof t)return t;try{t=e.parseJSON(t)}catch(s){}return t},h=function(e){return"object"==typeof e&&null!==e?"undefined"!=typeof e.error?e.error:"undefined"!=typeof e.message?e.message:null:null};return e.ajax(e.extend({},{url:s,data:a,type:r.options.remoteMethod||"GET",success:function(e){e=u(e),o(1===e||!0===e||"object"==typeof e&&null!==e&&"undefined"!=typeof e.success,h(e))},error:function(e){e=u(e),o(!1,h(e))}},n)),i},mincheck:function(e,t){return this.minlength(e,t)},maxcheck:function(e,t){return this.maxlength(e,t)},rangecheck:function(e,t){return this.rangelength(e,t)}},this.init(t)};e.extend(n.prototype,{constructor:n,init:function(e){var t,s=e.validators,r=e.messages;for(t in s)this.addValidator(t,s[t]);for(t in r)this.addMessage(t,r[t])},formatMesssage:function(e,t){if("object"==typeof t){for(var s in t)e=this.Validator.formatMesssage(e,t[s]);return e}return"string"==typeof e?e.replace(new RegExp("%s","i"),t):""},addValidator:function(e,t){this.validators[e]=t},addMessage:function(e,t,s){if("undefined"!=typeof s&&!0===s)return void(this.messages.type[e]=t);if("type"!==e);else for(var r in t)this.messages.type[r]=t[r]}});var o=function(t,s,r){return this.$element=e(t),this.Validator=new n(s),"PkvalidatorMultiField"===r?this:(this._options=s,this._type="PkvalidatorField",this.lstError=[],this.hasError=!1,this.addConstraints(),void this.init(s))};e.extend(o.prototype,{constructor:o,init:function(t){this.events="input."+this._type+" change."+this._type+" focusout."+this._type,this.$element.off(this.events).on(this.events,e.proxy(this.validate,this))},validate:function(){var e=this.getVal(),t=this.getData();if(!t.required&&!this.Validator.validators.required(e))return this._options.errors.classHandler(this.$element).removeClass("hasError"),this.removeMessageError(this.$element),!1;this.removeMessageError(this.$element),this._options.errors.classHandler(this.$element).removeClass("hasError"),this.hasError=!1;for(var s in t)if(this.Validator.validators.hasOwnProperty(s)&&!this.Validator.validators[s](e,t[s])){this._options.errors.classHandler(this.$element).addClass("hasError"),this.hasError=!0,this.showMessageError(this.$element,s,t[s]);break}return this.hasError},addConstraints:function(){for(var e in this._options.constraints){var t=this._options.constraints[e];"object"==typeof t&&this.addConstraint(e,t[e]),this.$element.data(e,t)}},manageErrors:function(){},showMessageError:function(t,s,r){var i=this._options.errors.classHandler(t),a="object"==typeof this.Validator.messages[s]?this.Validator.messages[s][r]:this.Validator.messages[s],n=i.find(e(this._options.errors.errorsWrapper)),o=e(this._options.errors.errorElem),a=this.Validator.formatMesssage(a,r,this);if(t.removeClass(this._options.successClass),t.attr("data-error-"+s)){var u=t.attr("data-error-"+s);a=this.Validator.formatMesssage(u,r,this)}o.text(a),n.length||(i.append(this._options.errors.errorsWrapper),n=e(e(this._options.errors.errorsWrapper),i)),o.addClass(this._options.errorClass),n.append(o),i.append(n)},removeMessageError:function(e){var t=this._options.errors.classHandler(e);t.removeClass("hasError"),t.find("."+this._options.errorClass+":first").parent().remove()},showSuccessField:function(e){e.removeClass(this._options.errorClass),e.addClass(this._options.successClass)},getVal:function(){return this.$element.data("value")||this.$element.val()},getData:function(){return this.$element.data()},destroy:function(){this.$element.off(this.events).removeData(this._type),this.removeMessageError(this.$element)}});var u=function(e,t){this.initMultiple(e,t),this.items={},this._type="PkvalidatorMultiField",this.Validator=new n(t),this._options=t,this.inherit(e,t),this.init(t)};e.extend(u.prototype,{inherit:function(e,t){var s=new o(e,t,this._type);for(var r in s)"undefined"==typeof this[r]&&(this[r]=s[r])},initMultiple:function(t,s){this.element=t,this.$element=e(t),this.group=s.group||!1,this.hash=this.getName(),this.siblings=this.group?'[data-group="'+this.group+'"]':'input[name="'+this.$element.attr("name")+'"]',this.isRadioOrCheckbox=!0,this.isRadio=this.$element.is("input[type=radio]"),this.isCheckbox=this.$element.is("input[type=checkbox]"),this.errorClassHandler=s.errors.classHandler(t,this.isRadioOrCheckbox)||this.$element.parent()},getVal:function(){if(this.isRadio)return e(this.siblings+":checked").val()||"";if(this.isCheckbox){var t=[];return e(this.siblings+":checked").each(function(){t.push(e(this).val())}),t}},getData:function(){return e(this.siblings).first().data()},getName:function(){if(this.group)return"pkvalidator-"+this.group;if("undefined"==typeof this.$element.attr("name"))throw"A radio / checkbox input must have a data-group attribute or a name to be pkvalidator validated !";return"pkvalidator-"+this.$element.attr("name").replace(/(:|\.|\[|\])/g,"")}});var h=function(t,s){this.$element=e(t),this.items=[],this._type="PkvalidatorForm",this.Validator=new n(s),this._options=s,this.init(s)};e.extend(h.prototype,{constructor:h,init:function(t){var s=this;this.$element.find(t.inputs).each(function(){s.addItem(this)}),this.events="submit.PkvalidatorForm",this.$element.off(this.events).on(this.events,e.proxy(this.onSubmit,this))},validate:function(){return this.items.forEach(function(e){e.validate()}),!this.hasError()},hasError:function(){for(var e in this.items)if(this.items[e].hasError)return!0;return!1},addItem:function(t){if(e(t).is(this._options.excluded))return!1;var s=e(t).pkvalidator(this._options);this.items.push(s)},onSubmit:function(e){this.validate()?console("submit success"):e.preventDefault()},showMessageError:function(t,s,r){var i=this._options.errors.classHandler(t),a="object"==typeof this.Validator.messages[s]?this.Validator.messages[s][r]:this.Validator.messages[s],n=i.find(e(this._options.errors.errorsWrapper)),o=e(this._options.errors.errorElem),a=this.Validator.formatMesssage(a,r,this);if(t.removeClass(this._options.successClass),t.attr("data-error-"+s)){var u=t.attr("data-error-"+s);a=this.Validator.formatMesssage(u,r,this)}o.text(a),n.length||(i.append(this._options.errors.errorsWrapper),n=e(e(this._options.errors.errorsWrapper),i)),o.addClass(this._options.errorClass),n.append(o),i.append(n)},removeMessageError:function(e){var t=this._options.errors.classHandler(e);t.removeClass("hasError"),t.find("."+this._options.errorClass+":first").parent().remove()},showSuccessField:function(e){e.removeClass(this._options.errorClass),e.addClass(this._options.successClass)},destroy:function(){this.$element.off(this.events).removeData(this._type),this.items.forEach(function(e){e.destroy()})}}),e.fn[i]=function(t,s){var r,i,n=e(this);if(i=n.is("form")?"PkvalidatorForm":n.is("input[type=radio], input[type=checkbox]")?"parsleyFieldMultiple":"PkvalidatorField",r=this.data(i)){if("string"==typeof t&&"function"==typeof r[t]){var l=r[t]();return"undefined"!=typeof l?l:e(self)}"undefined"!=typeof t&&r.init(t)}else t=e.extend({},a,"undefined"!=typeof t?t:{},this.data()),this.is("form")?r=new h(this,t):this.is(t.excluded)||(r=this.is("input[type=radio], input[type=checkbox]")?new u(this,t):new o(this,t)),this.data(r._type,r);return"function"==typeof s?s():r},e.fn[i].defaults=a,e(function(){e("[data-"+i+"]")[i]()})}(jQuery,window,document);